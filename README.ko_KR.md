# hawoond Tree to Directory

텍스트 파일로 정의된 디렉토리 구조를 실제 폴더와 파일로 생성

## 목적

이 프로그램은 텍스트로 표현된 디렉토리 트리 구조를 읽어들여, 해당 구조대로 실제 파일 시스템에 디렉토리와 파일을 생성한다. 졸릴때 유용하다

## 설치 방법

Go 1.16 이상이 필요하다.

### `go install`을 통한 설치

```bash
go install github.com/hawoond/hawoond-tree-to-directory/cmd/htd@latest
```

설치 후, 실행 파일은 `$GOPATH/bin` 또는 `$GOBIN`에 생성된다.

## 전체 기능과 사용법

### 기본 사용법

```bash
htd -input=tree.txt
```

축약형:

```bash
htd -i=tree.txt
```

`tree.txt`는 생성하고자 하는 디렉토리 및 파일 구조를 텍스트로 표현한 파일이다.

### 명령행 옵션

- `-input`, `-i`: 구조 파일 또는 디렉토리의 경로를 지정 (필수).
- `-output`, `-o`: 출력 파일의 경로를 지정합 (`-reverse` 모드에서 필수).
- `-indent`, `-n`: 들여쓰기 칸 수(공백 포함)를 지정 (기본값: 4).
- `-language`, `-lang`, `-l`: 프로그래밍 언어를 지정 (예: `go`, `python`).
- `-add-package`, `-p`: Go 언어의 경우, `.go` 파일에 패키지 선언을 추가 (`-language=go`와 함께 사용).
- `-reverse`, `-r`: 디렉토리 구조를 읽어서 텍스트로 저장.
- `-include`, `-I`: 포함할 파일/디렉토리 패턴을 콤마로 구분하여 지정.
- `-exclude`, `-E`: 제외할 파일/디렉토리 패턴을 콤마로 구분하여 지정.

### 기능 상세
### 기능 상세

1. **디렉토리 구조 생성**

   - 텍스트 파일에 정의된 디렉토리 및 파일 구조를 실제 파일 시스템에 생성.
   - 들여쓰기 칸 수를 조정하여 다양한 들여쓰기 스타일 지원.

2. **디렉토리 구조 저장**

   - 기존 디렉토리 구조를 텍스트 파일로 저장.
   - 들여쓰기 칸 수를 지정하여 트리 구조 표현.

3. **프로그래밍 언어 지원**

   - `-language` 옵션을 통해 프로그래밍 언어를 지정.
   - 현재는 `go` 언어에 대한 처리 지원.

4. **Go 언어 패키지 선언 추가**

   - `-language=go`와 `-add-package` 옵션을 함께 사용하면, `.go` 파일에 패키지 선언 추가.
   - 패키지 이름은 해당 파일이 속한 디렉토리의 이름을 기반으로 생성.

5. **로케일 감지 및 다국어 지원**

   - 프로그램은 시스템의 로케일을 감지하여, 해당 언어로 메시지를 출력.
   - 지원 언어 : 영어(`en`), 한국어(`ko`)

6. **축약형 플래그 지원**

   - 명령행 옵션에 대해 축약형 플래그 지원.
   - 예: `-input` ➔ `-i`, `-language` ➔ `-l`

7. **파일 및 디렉토리 필터링**

   - `-include` 또는 `-I` 옵션을 사용하여 포함할 파일/디렉토리 패턴 지정.
   - `-exclude` 또는 `-E` 옵션을 사용하여 제외할 파일/디렉토리 패턴 지정.
   - 패턴은 Glob 패턴을 사용하며, 콤마로 구분.

### 사용 예시

#### 디렉토리 생성

##### 구조 파일 (`tree.txt`)

```
project/
├── cmd/
│   └── app/
│       └── main.go
└── README.md
```

##### 프로그램 실행

```bash
htd -i=tree.txt -l=go -p
```

##### 결과

- `project/cmd/app/main.go` 파일:

  ```go
  package app

  ```

- `project/pkg/utils/helper.go` 파일:

  ```go
  package utils

  ```

- `project/README.md` 파일 생성(내용 없음).

#### 디렉토리 구조 저장

##### 프로그램 실행

```bash
htd -r -i=project -o=tree.txt -n=4
```

##### 결과

- `project` 디렉토리의 구조가 `tree.txt` 파일에 저장.

#### 디렉토리 생성 시 특정 파일 제외

```bash
htd -i=tree.txt -E="*.md,*.txt"
```

- `.md` 및 `.txt` 파일을 제외하고 디렉토리 생성.

#### 디렉토리 구조 저장 시 특정 디렉토리 포함

```bash
htd -r -i=project -o=tree.txt -I="cmd,pkg"
```

- `cmd` 및 `pkg` 디렉토리만 포함하여 구조를 저장.

### 도움말 보기

```bash
htd -h
```

또는

```bash
htd --help
```

## 참고 사항

- **들여쓰기 설정**

  - 기본 들여쓰기 칸 수는 4이며, `-indent` 옵션을 통해 변경.(기본값 : 4)
  - 들여쓰기가 탭 문자일 경우, `-indent=1`로 설정.

- **로케일 설정**

  - 프로그램은 `LANG`, `LC_ALL`, `LC_MESSAGES` 환경 변수를 통해 로케일을 감지.
  - 지원되지 않는 로케일인 경우 기본값으로 영어(`en`)를 사용.

- **패턴 매칭**

  - `-include` 및 `-exclude` 옵션의 패턴은 파일 또는 디렉토리의 **베이스 이름**에 적용.
  - 패턴은 [Glob 패턴](https://golang.org/pkg/path/filepath/#Match)을 사용.
  - 예: `*.go`는 `.go` 확장자를 가진 모든 파일에 매칭.

- **패키지 이름 규칙**

  - Go 언어의 패키지 이름은 소문자로 작성되며, 알파벳, 숫자, 밑줄(`_`)만 사용 가능.
  - 디렉토리 이름에서 패키지 이름으로 변환할 때, 필요한 경우 특수 문자를 제거하고 밑줄로 대체.

## 라이선스

이 프로젝트는 **MIT License**을 따른다. 자세한 내용은 `LICENSE` 파일을 참고.

---
